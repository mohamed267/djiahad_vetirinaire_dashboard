"use strict";(self.webpackChunkdjiahad_vetirinaire_dashboard=self.webpackChunkdjiahad_vetirinaire_dashboard||[]).push([[821],{9041:function(e,l,a){var i=a(1413),t=a(885),n=a(2791),d=a(9476),o=a(6871),r=a(4671),s=a(7308),f=a(9334),c=a(9680),u=a(6435),m=a(3101),p=a(4193),_=a(2294),g=a(2407),x=a(1798),y=a(3592),v=a(1385),h=a(5697),b=a(1822),j=(a(5657),a(3329)),w=function e(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>3?arguments[3]:void 0,t=arguments.length>4?arguments[4]:void 0,n=arguments.length>5?arguments[5]:void 0;if(t){var o=l&&l.form_field_type;!o||"SELECT"!==o.value&&"COMPLEXSELECT"!==o.value?a[3]={type:"none"}:a[3]={type:"select",label:"options",creatable:!0,field:"field_options",name:"field_options",isMulti:!0,placeholder:"enter your options",xl:6,id:"field_options"}}return a.map((function(a){return"none"==a.type?null:"title"==a.type?(0,j.jsxs)(d.JX,{md:12,className:"d-flex gap-3 align-items-center mb-3 ",children:[(0,j.jsx)("p",{className:"title_details",children:a.label}),(0,j.jsx)("p",{className:"divider mx-4"})]}):a.type?"imageInput"==a.type?(0,j.jsx)(d.JX,{xl:a.xl,children:(0,j.jsx)(f.Z,{src:(0,b.u)(l,a.field),name:a.name})}):"input"==a.type?(0,j.jsx)(d.JX,{xl:a.xl,children:(0,j.jsx)(c.Z,{label:a.label,value:(0,b.u)(l,a.field),name:a.name,field:a.field,placeholder:a.placeholder,className:a.className,type:a.typeInput,id:"id_form_".concat(a.id),changed:i})}):"textarea"==a.type?(0,j.jsx)(d.JX,{xl:a.xl,children:(0,j.jsx)(u.Z,{label:a.label,value:(0,b.u)(l,a.field),name:a.name,field:a.field,placeholder:a.placeholder,className:a.className,id:"id_form_".concat(a.id),changed:i})}):"address"==a.type?(0,j.jsx)(d.JX,{xl:a.xl,children:(0,j.jsx)(m.Z,{id:a.id,value:(0,b.u)(l,a.field),field:a.field,label:a.label,name:a.name,changed:i})}):"gps"==a.type?(0,j.jsx)(d.JX,{xl:a.xl,children:(0,j.jsx)(p.Z,{id:a.id,value:(0,b.u)(l,a.field),field:a.field,label:a.label,name:a.name,changed:i})}):"button"==a.type?(0,j.jsxs)(d.JX,{xl:a.xl,children:[n?(0,j.jsx)("div",{children:"loading "}):null,(0,j.jsx)(_.Z,{className:a.className,text:a.text})]}):"switch"==a.type?(0,j.jsx)(d.JX,{xl:a.xl,children:(0,j.jsx)(s.Z,{id:a.id,value:(0,b.u)(l,a.field),checkedOn:a.checkedOn,on:a.on,off:a.off,label:a.label,name:a.name,field:a.field,changed:i})}):"select"==a.type?(0,j.jsx)(d.JX,{xl:a.xl,className:a.className,children:"store"==a.typeSelect?(0,j.jsx)(y.Z,{id:a.id,value:(0,b.u)(l,a.field),field:a.field,field_deleted:a.field_deleted,options:a.options,label:a.label,name:a.name,isMulti:a.isMulti,creatable:a.creatable,changed:i}):(0,j.jsx)(g.Z,{id:a.id,value:(0,b.u)(l,a.field),options:a.options,field:a.field,field_deleted:a.field_deleted,label:a.label,name:a.name,creatable:a.creatable,isMulti:a.isMulti,changed:i})}):"select_complex"==a.type?(0,j.jsx)(d.JX,{xl:a.xl,className:a.className+" row align-items-center",children:(0,j.jsx)(x.Z,{id:a.id,value:(0,b.u)(l,a.field),field:a.field,options:a.options,label:a.label,name:a.name,isMulti:a.isMulti,creatable:a.creatable,changed:i})}):"map"==a.type?(0,j.jsx)(d.JX,{xl:a.xl,children:(0,j.jsx)(v.Z,{typeMap:a.typeMap,lat:(0,b.u)(l,a.field_lat),lng:(0,b.u)(l,a.field_lng),radius:(0,b.u)(l,a.field_radius),field_radius:a.field_radius,field_lat:a.field_lat,field_lng:a.field_lng,changed:i})}):void 0:(0,j.jsx)(d.JX,{xl:a.xl,children:(0,j.jsx)(d.X2,{className:a.className,children:e(l,a.fields)})})}))};l.Z=function(e){var l=e.structure,a=e.data,s=void 0===a?{}:a,f=e.submit,c=void 0===f?function(){}:f,u=e.restricted,m=e.loading,p=(0,r.$)("common").t,_=((0,o.TH)(),(0,n.useState)(s)),g=(0,t.Z)(_,2),x=g[0],y=g[1];(0,n.useEffect)((function(){s&&y(s)}),[s]),(0,n.useEffect)((function(){console.log("data query 3 ",x)}),[x]);return(0,j.jsxs)("div",{className:"form ".concat(l.className),children:[(0,j.jsx)("h4",{className:"title",children:p(l.title)}),(0,j.jsx)(d.l0,{onSubmit:function(e){e.preventDefault(),c(x)},children:(0,j.jsx)(d.X2,{gap:2,className:"justify-content-between",children:m?(0,j.jsx)(h.Z,{}):w(x,l.fields,y,(function(e,l){console.log("handled ",x),y((0,i.Z)((0,i.Z)({},x),(0,b.p)(l,e)))}),u,m)})})]})}},4395:function(e,l,a){a.r(l);var i=a(5987),t=a(2791),n=a(9434),d=a(6871),o=a(2195),r=a.n(o),s=a(8058),f=a(6475),c=a(9041),u=a(9476),m=a(1435),p=a(5602),_=a(1696),g=(a(8141),a(3329)),x=["farm_name","region","wilaya","daira","commune","date"];l.default=function(){var e=(0,n.I0)(),l=(0,d.UO)().form_id,a=(0,n.v9)((function(e){return e.form_field.form_fields})),o=(0,n.v9)((function(e){return e.form.details.form})),y=(0,n.v9)((function(e){return e.form.details.loading})),v=(0,n.v9)((function(e){return e.form.details.updated})),h=(0,n.v9)((function(e){return e.nav.opened}));(0,t.useEffect)((function(){e((0,p.s4)({})),e((0,_.R3)({form_id:l}))}),[]),(0,t.useEffect)((function(){if(a)m.Z.extractForm(a)}),[a]);return(0,g.jsxs)("div",{className:"flex document",children:[v&&(0,g.jsx)(d.Fg,{to:"/document/".concat(l)}),(0,g.jsx)(s.Z,{}),(0,g.jsxs)("div",{className:"documentContainer ".concat(h?"nav-opened":"nav-closed"),children:[(0,g.jsx)(f.Z,{}),(0,g.jsx)(u.W2,{className:"py-4",children:(0,g.jsxs)("div",{className:"document_details shadow",children:[(0,g.jsx)(u.X2,{className:"top p-3 justify-content-between",children:(0,g.jsx)(u.JX,{className:"d-flex flex-wrap align-items-baseline",children:(0,g.jsx)("h1",{className:"title_enquete mr-3",children:"enquete \xe9pid\xe9miologique"})})}),(0,g.jsx)(r(),{style:{maxHeight:"500px"},children:(0,g.jsx)(u.X2,{className:"details ",children:(0,g.jsx)(c.Z,{structure:m.Z.extractForm(a),submit:function(a){var t=a.farm_name,n=a.region,d=a.wilaya,o=a.daira,r=a.commune,s=a.date,f=(0,i.Z)(a,x),c=d&&d.wilaya_id?d.wilaya_id:null,u=n&&n.region_id?n.region_id:null,m=r&&r.commune_id?r.commune_id:null,p=o&&o.daira_id?o.daira_id:null;console.log(a),e((0,_.xM)({farm_name:t,daira_id:p,commune_id:m,wilaya_id:c,region_id:u,form_id:l,date:s,form:f}))},data:m.Z.dataForm(o),loading:y})})})]})})]})]})}},1435:function(e,l,a){var i=a(1413),t=a(885),n=a(2982),d=a(4942),o={extractData:function(e){var l={},a=[],i=[];if(e){i=[{type:"title",label:"r\xe9gion"},{type:"property",value:e.wilaya&&e.wilaya.wilaya_name?e.wilaya.wilaya_name:"N/A",name:"wilaya"},{type:"property",value:e.daira&&e.daira.daira_name?e.daira.daira_name:"N/A",name:"daira"},{type:"property",value:e.commune&&e.commune.commune_name?e.commune.commune_name:"N/A",name:"commune"}];var t=e&&e.address_fields,o=e&&e.string_fields,r=e&&e.boolean_fields,s=e&&e.number_fields,f=e&&e.text_fields,c=e&&e.date_fields;console.log("address field are ",t),t&&t.map((function(e){var i=e.address,t=e.form_field,n=t.form_field_name,o=e.lat,r=e.lng,s=t.field_group,f=s.field_group_slug,c=s.field_group_name,u=new Date(s.createdAt).getTime();l[u]||(l[u]={},l[u].group={type:"title",slug:f,label:c},l[u].fields=[],a.push(u)),o&&r?l[u].fields.push({type:"gps",name:n,value:"".concat(o,",").concat(r)}):l[u].fields.push((0,d.Z)({type:"property",name:n,value:i||"N/A"},"name",n))})),o&&o.map((function(e){var i=e.field_value;i=(i="string"==typeof i?i.split("_*_").join(" "):"")||"N/A";var t=e.form_field,n=t.form_field_name,d=t.field_group,o=d.field_group_slug,r=d.field_group_name,s=new Date(d.createdAt).getTime();l[s]||(l[s]={},l[s].group={type:"title",slug:o,label:r},l[s].fields=[],a.push(s)),l[s].fields.push({type:"property",value:i,name:n})})),f&&f.map((function(e){var i=e.field_value?e.field_value:"N/A",t=e.form_field,n=t.form_field_name,d=t.field_group,o=d.field_group_slug,r=d.field_group_name,s=new Date(d.createdAt).getTime();l[s]||(l[s]={},l[s].group={type:"title",slug:o,label:r},l[s].fields=[],a.push(s)),l[s].fields.push({type:"text",value:i,name:n})})),s&&s.map((function(e){var i=e.field_value,t=e.form_field,n=t.form_field_name,d=t.field_group,o=d.field_group_slug,r=d.field_group_name,s=new Date(d.createdAt).getTime();l[s]||(l[s]={},l[s].group={type:"title",slug:o,label:r},l[s].fields=[],a.push(s)),l[s].fields.push({type:"property",value:i,name:n})})),r&&r.map((function(e){var i=e.field_value,t=e.form_field,n=t.form_field_name,d=t.field_group,o=d.field_group_slug,r=d.field_group_name,s=new Date(d.createdAt).getTime();l[s]||(l[s]={},l[s].group={type:"title",slug:o,label:r},l[s].fields=[],a.push(s)),l[s].fields.push({type:"property",value:i?"oui":"non",name:n})})),c&&c.map((function(e){var i=e.field_value?e.field_value:"N/A",t=e.form_field,n=t.form_field_name,d=t.field_group,o=d.field_group_slug,r=d.field_group_name,s=new Date(d.createdAt).getTime();l[s]||(l[s]={},l[s].group={type:"title",slug:o,label:r},l[s].fields=[],a.push(s)),l[s].fields.push({type:"date",value:i,name:n})}))}return a.sort(),a.forEach((function(e){var a=l[e];i.push(a.group),i=[].concat((0,n.Z)(i),(0,n.Z)(a.fields))})),i},extractForm:function(e){var l={},a=[];e&&e.map((function(e){var i=e.field_group,t=i.field_group_slug,n=i.field_group_name,d=new Date(i.createdAt).getTime();l[d]||(l[d]={},l[d].group={type:"title",slug:t,label:n},l[d].fields=[],a.push(d));var o=e.form_field_id,r=e.form_field_name,s=e.form_field_type,f=e.field_options,c="",u="",m=6;"STRING"==s?(c="input",u="text"):"TEXT"==s?(c="textarea",m=12):"NUMBER"==s?(c="input",u="number"):"DATE"==s&&(c="input",u="date"),"SELECT"==s?l[d].fields.push({type:"select",label:r,field:o.toString(),name:"".concat(r,"__").concat(o),options:{label:"field_option_value",value:"field_option_id",options:f||[]},placeholder:"",xl:6,id:"".concat(r,"__").concat(o)}):"COMPLEXSELECT"==s?l[d].fields.push({type:"select_complex",label:r,field:o.toString(),name:"".concat(r,"__").concat(o),options:{label:"field_option_value",value:"field_option_id",options:f||[]},placeholder:"",xl:8,id:"".concat(r,"__").concat(o)}):"ADDRESS"==s?l[d].fields.push({type:"address",label:r,field:o.toString(),name:"".concat(r,"__").concat(o),placeholder:"",xl:8,id:"".concat(r,"__").concat(o)}):"GPS"==s?l[d].fields.push({type:"gps",label:r,field:o.toString(),name:"".concat(r,"__").concat(o),placeholder:"",xl:8,id:"".concat(r,"__").concat(o)}):"BOOLEAN"==s?l[d].fields.push({type:"switch",label:r,field:o.toString(),checkedOn:!0,on:r,off:"non ".concat(r),name:"".concat(r,"__").concat(o),placeholder:"",xl:4,id:"".concat(r,"__").concat(o)}):l[d].fields.push({type:c,label:r,name:"".concat(r,"__").concat(o),typeInput:u,field:o.toString(),placeholder:"",xl:m,id:"".concat(r,"__").concat(o)})}));var i=[{type:"input",label:"nom de la ferme",name:"farme_name",typeInput:"text",field:"farm_name",xl:6,id:"farme_name"},{type:"input",label:"date de l'enquete",name:"date de l'enqu\xe8te",typeInput:"date",field:"date",xl:6,id:"form_date"},{type:"title",slug:"r\xe9gion",label:"r\xe9gion"},{type:"select",label:"region",typeSelect:"store",field:"region",name:"region",options:{key:"regions",where:"region",label:"region_name",value:"region_id"},placeholder:"saidir votre r\xe9gion",xl:4,id:"region"},{type:"select",label:"wilaya",typeSelect:"store",field:"wilaya",name:"wilaya",options:{key:"wilayas",where:"wilaya",label:"wilaya_name",value:"wilaya_id"},placeholder:"saisir votre wilaya",xl:4,id:"wilaya"},{type:"select",label:"daira",typeSelect:"store",field:"daira",name:"daira",options:{key:"dairas",where:"daira",label:"daira_name",value:"daira_id"},placeholder:"enter your daira",xl:4,id:"daira"},{type:"select",label:"commune",typeSelect:"store",field:"commune",name:"commune",options:{key:"communes",where:"commune",label:"commune_name",value:"commune_id"},placeholder:"enter your commune",xl:4,id:"commune"}];return a.sort(),a.forEach((function(e){var a=l[e];i.push(a.group),i=[].concat((0,n.Z)(i),(0,n.Z)(a.fields))})),i.push({xl:12,className:"px-3 my-4",fields:[{type:"button",className:"w-100 btn--primary",text:"save changes"}]}),console.log("our all extrated ",i),{type:"row",className:"w-100 ",fields:i||[]}},dataForm:function(e){var l={};if(e){l.date=new Date(e.date).getTime(),l.farm_name=e.farm_name,l.region=e.region,l.wilaya=e.wilaya,l.commune=e.commune,l.daira=e.daira;var a=e&&e.string_fields;a&&a.map((function(e){var a=e.field_value,n=e.form_field_id,d=e.form_field.form_field_type;if("COMPLEXSELECT"==d){var o=a.split("_*_"),r=(0,t.Z)(o,2),s=r[0],f=r[1],c=e.form_field.field_options,u=c&&c.filter((function(e){return e.field_option_value==s})),m=u[0]?(0,i.Z)((0,i.Z)({},u[0]),{},{extra:f}):{extra:f};l[n.toString()]=m}if("SELECT"==d){var p=e.form_field.field_options,_=p&&p.filter((function(e){return e.field_option_value==a})),g=_[0]?_[0]:{};l[n.toString()]=g}if("STRING"==d){var x=e.field_value;l[n.toString()]=x}}));var n=[];(n=e&&e.text_fields)&&n.map((function(e){var a=e.field_value,i=e.form_field_id;l[i.toString()]=a})),(n=e&&e.boolean_fields)&&n.map((function(e){var a=e.field_value,i=e.form_field_id;l[i.toString()]=a})),(n=e&&e.number_fields)&&n.map((function(e){var a=e.field_value,i=e.form_field_id;l[i.toString()]=a}));var d=e&&e.address_fields;d&&d.map((function(e){var a=e.form_field_id;l[a.toString()]={address:e.address,lat:e.lat,lng:e.lng}}))}return l}};l.Z=o},8141:function(){}}]);
//# sourceMappingURL=821.e4c6ffc9.chunk.js.map