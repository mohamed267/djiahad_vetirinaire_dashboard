(self.webpackChunkdalilimob_dashboard=self.webpackChunkdalilimob_dashboard||[]).push([[381],{4534:function(e,a,l){"use strict";l.r(a);var t=l(885),i=l(2791),n=l(9434),r=l(6871),o=l(3504),s=l(9576),d=l.n(s),c=l(8058),f=l(6475),u=l(9476),m=(l(8141),l(1696)),p=l(1435),_=l(5287),g=l(3329);function h(){var e=window;return{innerWidth:e.innerWidth,innerHeight:e.innerHeight}}a.default=function(){var e=(0,n.I0)(),a=(0,r.UO)().form_id,l=(0,n.v9)((function(e){return e.form.details})).form,s=(0,n.v9)((function(e){return e.nav.opened})),y=(0,i.useState)(0),x=(0,t.Z)(y,2),v=x[0],b=x[1],w=(0,i.useState)(0),N=(0,t.Z)(w,2),j=N[0],S=N[1],E=(0,i.useState)(!0),A=(0,t.Z)(E,2),T=A[0],X=A[1],Z=(0,i.useState)([]),D=(0,t.Z)(Z,2),k=D[0],C=D[1];function J(){X(h().innerWidth<600)}return(0,i.useEffect)((function(){X(h().innerWidth<600),window.addEventListener("resize",J),e((0,m.R3)({form_id:a}))}),[]),(0,i.useEffect)((function(){S(k.length?k.length:0)}),[k]),(0,i.useEffect)((function(){console.log("fildd  ",l);var e=p.Z.extractData(l),a=T?function(e){var a=[],l=[],t=0;return e.map((function(i,n){"title"==i.type&&(t+=1),3==t&&(a.push(l),t=1,l=[]),n+1==e.length&&(l.push(i),a.push(l),t=1,l=[]),l.push(i)})),a}(e):[e];C(a)}),[l,T]),(0,g.jsxs)("div",{className:"flex document",children:[(0,g.jsx)(c.Z,{}),(0,g.jsxs)("div",{className:"documentContainer ".concat(s?"nav-opened":"nav-closed"),children:[(0,g.jsx)(f.Z,{}),(0,g.jsxs)(u.W2,{className:"py-4",children:[(0,g.jsxs)(u.X2,{className:"justify-content-between align-items-center",children:[(0,g.jsxs)(u.aG,{className:"col-xl-11",children:[(0,g.jsx)(u.gN,{children:l&&l.region?l.region.region_name:""}),(0,g.jsx)(u.gN,{active:!0,children:l?l.farm_name:""})]}),(0,g.jsx)(u.JX,{xl:1,children:(0,g.jsx)(o.rU,{to:"/document/edit/".concat(a),children:(0,g.jsx)("i",{className:"edit-button las la-pen"})})})]}),(0,g.jsxs)("div",{className:"document_details shadow",children:[(0,g.jsxs)(u.X2,{className:"top p-3 justify-content-between",children:[(0,g.jsxs)(u.JX,{className:"d-flex flex-wrap align-items-baseline",children:[(0,g.jsx)("h1",{className:"title_enquete mr-3",children:"enquete \xe9pid\xe9miologique"}),(0,g.jsxs)("p",{className:"ferme",children:[" ",l?l.farm_name:""]})]}),(0,g.jsx)(u.JX,{children:(0,g.jsxs)("h1",{className:"time",children:["date : ",l&&l.date?(0,_.s)(l.date):""]})})]}),(0,g.jsx)(d(),{style:{maxHeight:"500px"},children:(0,g.jsx)(u.X2,{className:"details ",children:k&&k[T?v:0]&&k[T?v:0].map((function(e){return"title"==e.type?(0,g.jsxs)(u.JX,{md:12,className:"d-flex gap-3 align-items-center  ",children:[(0,g.jsx)("p",{className:"title_details",children:e.label}),(0,g.jsx)("p",{className:"divider mx-4"})]}):"gps"==e.type?(0,g.jsxs)(u.JX,{className:"property d-flex my-4    gap-1 align-items-center flex-column  ",children:[(0,g.jsx)("p",{className:"prop_name",children:e.name}),(0,g.jsx)("a",{href:"https://maps.google.com/?q=".concat(e.value),target:"_blank",children:(0,g.jsx)(u.zx,{className:"gps-button",children:(0,g.jsx)("i",{className:"las la-map-marker "})})})]}):"property"==e.type?(0,g.jsxs)(u.JX,{className:"property d-flex my-4    gap-1 align-items-center flex-column  ",children:[(0,g.jsx)("p",{className:"prop_name",children:e.name}),(0,g.jsx)("p",{className:"prop_value",children:e.value})]}):"text"==e.type?(0,g.jsx)(d(),{style:{maxHeight:"150px"},children:(0,g.jsx)(u.JX,{className:"w-100 p-3 property_text d-flex  gap-3 align-items-center flex-column  ",children:(0,g.jsx)("p",{className:"prop_text_value",children:e.value})})}):void 0}))})})]}),T?(0,g.jsxs)(u.X2,{className:"justify-content-center my-4",children:[0!==v&&(0,g.jsx)(u.JX,{className:"page-icon",children:(0,g.jsx)("i",{onClick:function(){b(v-1)},className:"las cursor-pointer la-angle-left"})}),v!==j&&(0,g.jsx)(u.JX,{className:"page-icon",children:(0,g.jsx)("i",{onClick:function(){b(v+1)},className:" cursor-pointer las la-angle-right"})})]}):null]})]})]})}},5287:function(e,a){a.s=function(e){console.log("date is ",e);return new Date(e).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}},1435:function(e,a,l){"use strict";var t=l(1413),i=l(885),n=l(2982),r=l(4942),o={extractData:function(e){var a={},l=[],t=[];if(e){t=[{type:"title",label:"r\xe9gion"},{type:"property",value:e.wilaya&&e.wilaya.wilaya_name?e.wilaya.wilaya_name:"N/A",name:"wilaya"},{type:"property",value:e.daira&&e.daira.daira_name?e.daira.daira_name:"N/A",name:"daira"},{type:"property",value:e.commune&&e.commune.commune_name?e.commune.commune_name:"N/A",name:"commune"}];var i=e&&e.address_fields,o=e&&e.string_fields,s=e&&e.boolean_fields,d=e&&e.number_fields,c=e&&e.text_fields,f=e&&e.date_fields;console.log("address field are ",i),i&&i.map((function(e){var t=e.address,i=e.form_field,n=i.form_field_name,o=e.lat,s=e.lng,d=i.field_group,c=d.field_group_slug,f=d.field_group_name,u=new Date(d.createdAt).getTime();a[u]||(a[u]={},a[u].group={type:"title",slug:c,label:f},a[u].fields=[],l.push(u)),o&&s?a[u].fields.push({type:"gps",name:n,value:"".concat(o,",").concat(s)}):a[u].fields.push((0,r.Z)({type:"property",name:n,value:t||"N/A"},"name",n))})),o&&o.map((function(e){var t=e.field_value;t="string"==typeof t?t.split("_*_").join(" "):"",t=e.field_value?e.field_value:"N/A";var i=e.form_field,n=i.form_field_name,r=i.field_group,o=r.field_group_slug,s=r.field_group_name,d=new Date(r.createdAt).getTime();a[d]||(a[d]={},a[d].group={type:"title",slug:o,label:s},a[d].fields=[],l.push(d)),a[d].fields.push({type:"property",value:t,name:n})})),c&&c.map((function(e){var t=e.field_value?e.field_value:"N/A",i=e.form_field,n=i.form_field_name,r=i.field_group,o=r.field_group_slug,s=r.field_group_name,d=new Date(r.createdAt).getTime();a[d]||(a[d]={},a[d].group={type:"title",slug:o,label:s},a[d].fields=[],l.push(d)),a[d].fields.push({type:"text",value:t,name:n})})),d&&d.map((function(e){var t=e.field_value,i=e.form_field,n=i.form_field_name,r=i.field_group,o=r.field_group_slug,s=r.field_group_name,d=new Date(r.createdAt).getTime();a[d]||(a[d]={},a[d].group={type:"title",slug:o,label:s},a[d].fields=[],l.push(d)),a[d].fields.push({type:"property",value:t,name:n})})),s&&s.map((function(e){var t=e.field_value,i=e.form_field,n=i.form_field_name,r=i.field_group,o=r.field_group_slug,s=r.field_group_name,d=new Date(r.createdAt).getTime();a[d]||(a[d]={},a[d].group={type:"title",slug:o,label:s},a[d].fields=[],l.push(d)),a[d].fields.push({type:"property",value:t?"oui":"non",name:n})})),f&&f.map((function(e){var t=e.field_value?e.field_value:"N/A",i=e.form_field,n=i.form_field_name,r=i.field_group,o=r.field_group_slug,s=r.field_group_name,d=new Date(r.createdAt).getTime();a[d]||(a[d]={},a[d].group={type:"title",slug:o,label:s},a[d].fields=[],l.push(d)),a[d].fields.push({type:"date",value:t,name:n})}))}return l.sort(),l.forEach((function(e){var l=a[e];t.push(l.group),t=[].concat((0,n.Z)(t),(0,n.Z)(l.fields))})),t},extractForm:function(e){var a={},l=[];e&&e.map((function(e){var t=e.field_group,i=t.field_group_slug,n=t.field_group_name,r=new Date(t.createdAt).getTime();a[r]||(a[r]={},a[r].group={type:"title",slug:i,label:n},a[r].fields=[],l.push(r));var o=e.form_field_id,s=e.form_field_name,d=e.form_field_type,c=e.field_options,f="",u="",m=6;"STRING"==d?(f="input",u="text"):"TEXT"==d?(f="textarea",m=12):"NUMBER"==d?(f="input",u="number"):"DATE"==d&&(f="input",u="date"),"SELECT"==d?a[r].fields.push({type:"select",label:s,field:o.toString(),name:"".concat(s,"__").concat(o),options:{label:"field_option_value",value:"field_option_id",options:c||[]},placeholder:"",xl:6,id:"".concat(s,"__").concat(o)}):"COMPLEXSELECT"==d?a[r].fields.push({type:"select_complex",label:s,field:o.toString(),name:"".concat(s,"__").concat(o),options:{label:"field_option_value",value:"field_option_id",options:c||[]},placeholder:"",xl:8,id:"".concat(s,"__").concat(o)}):"ADDRESS"==d?a[r].fields.push({type:"address",label:s,field:o.toString(),name:"".concat(s,"__").concat(o),placeholder:"",xl:8,id:"".concat(s,"__").concat(o)}):"GPS"==d?a[r].fields.push({type:"gps",label:s,field:o.toString(),name:"".concat(s,"__").concat(o),placeholder:"",xl:8,id:"".concat(s,"__").concat(o)}):"BOOLEAN"==d?a[r].fields.push({type:"switch",label:s,field:o.toString(),checkedOn:!0,on:s,off:"non ".concat(s),name:"".concat(s,"__").concat(o),placeholder:"",xl:4,id:"".concat(s,"__").concat(o)}):a[r].fields.push({type:f,label:s,name:"".concat(s,"__").concat(o),typeInput:u,field:o.toString(),placeholder:"",xl:m,id:"".concat(s,"__").concat(o)})}));var t=[{type:"input",label:"nom de la ferme",name:"farme_name",typeInput:"text",field:"farm_name",xl:6,id:"farme_name"},{type:"input",label:"date de l'enquete",name:"date de l'enqu\xe8te",typeInput:"date",field:"date",xl:6,id:"form_date"},{type:"title",slug:"r\xe9gion",label:"r\xe9gion"},{type:"select",label:"region",typeSelect:"store",field:"region",name:"region",options:{key:"regions",where:"region",label:"region_name",value:"region_id"},placeholder:"saidir votre r\xe9gion",xl:4,id:"region"},{type:"select",label:"wilaya",typeSelect:"store",field:"wilaya",name:"wilaya",options:{key:"wilayas",where:"wilaya",label:"wilaya_name",value:"wilaya_id"},placeholder:"saisir votre wilaya",xl:4,id:"wilaya"},{type:"select",label:"daira",typeSelect:"store",field:"daira",name:"daira",options:{key:"dairas",where:"daira",label:"daira_name",value:"daira_id"},placeholder:"enter your daira",xl:4,id:"daira"},{type:"select",label:"commune",typeSelect:"store",field:"commune",name:"commune",options:{key:"communes",where:"commune",label:"commune_name",value:"commune_id"},placeholder:"enter your commune",xl:4,id:"commune"}];return l.sort(),l.forEach((function(e){var l=a[e];t.push(l.group),t=[].concat((0,n.Z)(t),(0,n.Z)(l.fields))})),t.push({xl:12,className:"px-3 my-4",fields:[{type:"button",className:"w-100 btn--primary",text:"save changes"}]}),console.log("our all extrated ",t),{type:"row",className:"w-100 ",fields:t||[]}},dataForm:function(e){var a={};if(e){a.date=new Date(e.date).getTime(),a.farm_name=e.farm_name,a.region=e.region,a.wilaya=e.wilaya,a.commune=e.commune,a.daira=e.daira;var l=e&&e.string_fields;l&&l.map((function(e){var l=e.field_value,n=e.form_field_id,r=e.form_field.form_field_type;if("COMPLEXSELECT"==r){var o=e.form_field.field_options,s=l.split("_*_"),d=(0,i.Z)(s,2),c=d[0],f=d[1],u=o&&o.filter((function(e){return e.field_option_value==c})),m=u[0]?(0,t.Z)((0,t.Z)({},u[0]),{},{extra:f}):{extra:f};a[n.toString()]=m}if("SELECT"==r){var p=e.form_field.field_options,_=p&&p.filter((function(e){return e.field_option_value==l})),g=_[0]?_[0]:{};a[n.toString()]=g}if("STRING"==r){var h=e.field_value;a[n.toString()]=h}}));var n=[];(n=e&&e.text_fields)&&n.map((function(e){var l=e.field_value,t=e.form_field_id;a[t.toString()]=l})),(n=e&&e.boolean_fields)&&n.map((function(e){var l=e.field_value,t=e.form_field_id;a[t.toString()]=l})),(n=e&&e.number_fields)&&n.map((function(e){var l=e.field_value,t=e.form_field_id;a[t.toString()]=l}));var r=e&&e.address_fields;r&&r.map((function(e){var l=e.form_field_id;a[l.toString()]={address:e.address,lat:e.lat,lng:e.lng}}))}return a}};a.Z=o},8141:function(){}}]);
//# sourceMappingURL=381.e4131558.chunk.js.map